{% extends "base.html" %}
{% block title %}Warranty - {{ job.name }}{% endblock %}
{% block content %}
<div class="page-header">
    <h1>{{ job.name }} - Warranties</h1>
    <div>
        <button class="btn btn-primary btn-small" onclick="showAddWarranty()">+ Add Warranty</button>
        <a href="/warranty" class="btn btn-secondary btn-small">Back</a>
    </div>
</div>
<div id="warrantyItems"></div>

<!-- Add Warranty Modal -->
<div id="warrantyModal" class="modal-overlay" style="display:none;" onclick="if(event.target===this)this.style.display='none'">
    <div class="modal">
        <h2 id="warrantyModalTitle">Add Warranty Item</h2>
        <form onsubmit="saveWarrantyItem(event)">
            <label>Item Description</label><input type="text" id="wiDesc" required>
            <label>Manufacturer</label><input type="text" id="wiMfg">
            <label>Warranty Start</label><input type="date" id="wiStart">
            <label>Warranty End</label><input type="date" id="wiEnd">
            <label>Coverage Details</label><textarea id="wiCoverage" style="width:100%;padding:10px;border:1px solid var(--gray-300);border-radius:6px;min-height:80px;margin-bottom:16px;font-family:inherit;"></textarea>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('warrantyModal').style.display='none'">Cancel</button>
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- Add Claim Modal -->
<div id="claimModal" class="modal-overlay" style="display:none;" onclick="if(event.target===this)this.style.display='none'">
    <div class="modal">
        <h2>File Warranty Claim</h2>
        <form onsubmit="saveWarrantyClaim(event)">
            <input type="hidden" id="claimWarrantyId">
            <label>Claim Date</label><input type="date" id="claimDate">
            <label>Description</label><textarea id="claimDesc" style="width:100%;padding:10px;border:1px solid var(--gray-300);border-radius:6px;min-height:80px;margin-bottom:16px;font-family:inherit;"></textarea>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('claimModal').style.display='none'">Cancel</button>
                <button type="submit" class="btn btn-primary">File Claim</button>
            </div>
        </form>
    </div>
</div>

<script>window.JOB_ID = {{ job.id }};</script>
<script src="/static/warranty.js"></script>
{% endblock %}
